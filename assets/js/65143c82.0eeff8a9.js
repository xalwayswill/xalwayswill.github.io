"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8559],{62260:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>_,frontMatter:()=>t,metadata:()=>i,toc:()=>d});var s=e(74848),l=e(28453);const t={},c=void 0,i={id:"save this to git code reponsitories/2021-03-26-2",title:"2021-03-26-2",description:"",source:"@site/docs/save this to git code reponsitories/2021-03-26-2.md",sourceDirName:"save this to git code reponsitories",slug:"/save this to git code reponsitories/2021-03-26-2",permalink:"/docs/save this to git code reponsitories/2021-03-26-2",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/save this to git code reponsitories/2021-03-26-2.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"2021-01-27",permalink:"/docs/save this to git code reponsitories/2021-01-27"},next:{title:"2021-03-26",permalink:"/docs/save this to git code reponsitories/2021-03-26"}},a={},d=[];function g(n){const r={code:"code",pre:"pre",...(0,l.R)(),...n.components};return(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"`timescale 1 ns/ 1 ps\r\nmodule Freq_tb (\r\n);\r\n    parameter       CLK_PERIOD = 20;\r\n    parameter       RESET_HOLD = 40;\r\n    reg                 clk;\r\n    reg                 clk_tst;\r\n    reg                 rst;\r\n    wire    [27 : 0]    Freq;\r\n    \r\n    initial begin\r\n        rst = 1;\r\n        # (RESET_HOLD)\r\n        rst = 0;\r\n    end\r\n    \r\n    always begin\r\n        clk = 0;\r\n        #(CLK_PERIOD/2);\r\n        clk = 1;\r\n        #(CLK_PERIOD/2);\r\n    end\r\n    \r\n    always begin\r\n        clk_tst = 0;\r\n        #(CLK_PERIOD/8);\r\n        clk_tst = 1;\r\n        #(CLK_PERIOD/8);\r\n    end\r\n    \r\n    FreqTest Freq_tst(\r\n        .clk        (clk       ),\r\n        .clk_tst    (clk_tst   ),\r\n        .rst        (rst       ),\r\n        .Freq       (Freq      )\r\n    );\r\n    \r\nendmodule\r\n    \r\n//\u8f93\u5165\u4fe1\u53f750MHz,\u6d4b\u91cf\u4fe1\u53f71M~200M\r\n\r\nmodule FreqTest (\r\n    input               clk,\r\n    input               clk_tst,\r\n    input               rst,\r\n    output reg [27 : 0] Freq\r\n);\r\nreg     [25 : 0]    cnt;\r\nreg     [27 : 0]    cntFreq = 0;\r\nreg                 en;\r\nalways @(posedge clk) begin\r\n    if (rst) begin\r\n        cnt <= 26'd0;\r\n    end\r\n    else begin\r\n        cnt <= cnt + 1'b1;\r\n    end\r\nend\r\n\r\nalways @(posedge clk) begin\r\n    if (rst) begin\r\n        en <= 1'b0;\r\n        Freq <= 28'd0;\r\n    end\r\n    else if (cnt == 26'd0) begin\r\n        en <= 1'b1;\r\n        Freq <= Freq;\r\n    end\r\n    else if (cnt == 26'd50000000) begin     //1s \r\n        en <= 1'b0;\r\n        Freq <= cntFreq;\r\n    end\r\nend\r\n\r\nalways @(posedge clk_tst) begin\r\n    if (rst) cntFreq <= 28'd0;\r\n    else if (en) cntFreq <= cntFreq + 1'b1;\r\n    else cntFreq <= 28'd0;\r\nend\r\n\r\nendmodule\r\n\r\n\r\n`timescale 1ns/1ps\r\n////////////////////////////////////////////////////////////////////////////\r\n//Design Name:\r\n//Author:\r\n//Description:\r\n//\r\n//Revision:\r\n////////////////////////////////////////////////////////////////////////////\r\nmodule traffic_light(\r\n    input                   clk,\r\n    input                   rst,\r\n    input                   hold,\r\n    output  reg [2 : 0]     light\r\n);\r\nparameter   Y1   =   4'b0001;\r\nparameter   R    =   4'b0010;\r\nparameter   Y2   =   4'b0100;\r\nparameter   G    =   4'b1000;\r\nreg [3 : 0] cs, ns;\r\nreg [6 : 0] cnt;\r\nalways @(posedge clk) begin\r\n    if (rst) begin\r\n        cs <= Y1;\r\n    end\r\n    else begin\r\n        cs <= ns;\r\n    end\r\nend\r\n\r\nalways @(*) begin\r\n    if (rst) begin\r\n        ns = Y1;\r\n    end\r\n    else begin\r\n        case(cs)\r\n            Y1 : begin\r\n                if (cnt == 3) ns = R;\r\n                else ns = Y1;\r\n            end\r\n            R  : begin\r\n                if (cnt == 33) ns = Y2;\r\n                else ns = R;\r\n            end\r\n            Y2 : begin\r\n                if (cnt == 36) ns = G;\r\n                else ns = Y2;\r\n            end\r\n            G  : begin\r\n                if (cnt == 76 || hold == 1) ns = Y1;\r\n                else ns = G;\r\n            end\r\n            default : ns = Y1;\r\n        endcase\r\n    end\r\nend\r\n\r\nalways @(*) begin\r\n    if (rst) begin\r\n        light = 3'b001;\r\n    end\r\n    else begin\r\n        case(cs) \r\n            Y1 : light = 3'b010;\r\n            Y2 : light = 3'b010;\r\n            R  : light = 3'b100;\r\n            G  : light = 3'b001;\r\n            default : light = 3'b010;\r\n        endcase\r\n    end\r\nend\r\n\r\nalways @(posedge clk) begin\r\n    if (rst) begin\r\n        cnt <= 8'd0;\r\n    end\r\n    else if (cnt == 76) begin\r\n        cnt <= 8'd0;\r\n    end\r\n    else if (hold == 1) begin\r\n        cnt <= 8'd0;\r\n    end\r\n    else begin\r\n        cnt <= cnt + 1'b1;\r\n    end\r\nend\r\nendmodule\r\n\r\n\r\n//\u5e8f\u5217\u68c0\u6d4b\u5668\uff0c\u68c0\u6d4b1010010\r\n//\u4e09\u6bb5\u5f0f\u72b6\u6001\u673a\u7684\u6781\u7b80\u5199\u6cd5\r\nmodule xljc(\r\n    input   clk,\r\n    input   rst,\r\n    input   seq,\r\n    output  ans\r\n);\r\nparameter   S1 = 8'b00000001;\r\nparameter   S2 = 8'b00000010;\r\nparameter   S3 = 8'b00000100;\r\nparameter   S4 = 8'b00001000;\r\nparameter   S5 = 8'b00010000;\r\nparameter   S6 = 8'b00100000;\r\nparameter   S7 = 8'b01000000;\r\nparameter   S8 = 8'b10000000;\r\n\r\nreg [7 : 0] cs, ns;\r\nalways @(posedge clk) begin\r\n    if (rst)\r\n        cs <= S1;\r\n    else\r\n        cs <= ns;\r\nend\r\n\r\nalways @(*) begin\r\n    if (rst) \r\n        ns = S1;\r\n    else begin\r\n        case (cs)\r\n            S1 : ns = (seq) ? S2 : S1; \r\n            S2 : ns = (seq) ? S2 : S3; \r\n            S3 : ns = (seq) ? S4 : S1; \r\n            S4 : ns = (seq) ? S2 : S5; \r\n            S5 : ns = (seq) ? S4 : S6; \r\n            S6 : ns = (seq) ? S7 : S1; \r\n            S7 : ns = (seq) ? S2 : S8; \r\n            S8 : ns = (seq) ? S2 : S1;\r\n            default : ns = S1;\r\n        endcase\r\n    end\r\nend\r\n\r\nassign ans = (cs == S8 && seq == 1) ? 1 : 0;\r\nendmodule\r\n/*\r\n\u6309\u952e\u6d88\u6296\uff0c\u6ee4\u9664\u5c0f\u4e8e\u4e09\u4e2a\u65f6\u949f\u5468\u671f\u7684\u6bdb\u523a\r\n*/\r\nmodule debounce (\r\n\tinput\t\tclk,\r\n\tinput\t\tiSignal,\r\n\toutput reg\toSignal\r\n);\r\nreg\t\t[3 : 0] Signal_r;\r\nalways @(posedge clk) begin\r\n\tSignal_r <= {Signal_r[2 : 0], iSignal};\r\nend\r\n\r\nalways @(posedge clk) begin\r\n\tif (Signal_r != 4'b1111 && Signal_r != 4'b0000) begin\r\n\t\toSignal <= oSignal;\r\n\tend\r\n\telse begin\r\n\t\toSignal <= Signal_r[3];\r\n\tend\r\nend\r\nendmodule\r\n/*\r\n\u65f6\u949f\u5207\u6362\uff0c\u8fd8\u672a\u770b\u61c2\r\n*/\r\nmodule clk_switch (\r\n                rst_n          , //\r\n                clka            , //\r\n                clkb            , //\r\n                sel_clkb      , //\r\n                clk_o            //\r\n                );\r\n\r\n//assign clka_n = ~clka;\r\n//assign clkb_n = ~clkb;\r\n\r\n// part1\r\n//always @ (posedge clka_n or negedge rst_n)\r\nalways @ (posedge clka or negedge rst_n)\r\nbegin\r\n    if (!rst_n) begin\r\n        sel_clka_d0 <= 1'b0;\r\n        sel_clka_d1 <= 1'b0;\r\n    end\r\n    else begin\r\n        sel_clka_d0 <= (~sel_clkb) & (~sel_clkb_dly3) ;\r\n        sel_clka_d1 <= sel_clka_d0 ;\r\n    end\r\nend\r\n\r\n// part2\r\n//always @ (posedge clka_n or negedge rst_n)\r\nalways @ (posedge clka or negedge rst_n)\r\nbegin\r\n    if (!rst_n) begin\r\n        sel_clka_dly1 <= 1'b0;\r\n        sel_clka_dly2 <= 1'b0;\r\n        sel_clka_dly3 <= 1'b0;\r\n    end\r\n    else begin\r\n        sel_clka_dly1 <= sel_clka_d1;\r\n        sel_clka_dly2 <= sel_clka_dly1 ;\r\n        sel_clka_dly3 <= sel_clka_dly2 ;\r\n    end\r\nend\r\n\r\n// part3\r\n//always @ (posedge clkb_n or negedge rst_n)\r\nalways @ (posedge clkb or negedge rst_n)\r\nbegin\r\n    if (!rst_n) begin\r\n        sel_clkb_d0 <= 1'b0;\r\n        sel_clkb_d1 <= 1'b0;\r\n    end\r\n    else begin\r\n        sel_clkb_d0 <= sel_clkb & (~sel_clka_dly3) ;\r\n        sel_clkb_d1 <= sel_clkb_d0 ;\r\n    end\r\nend\r\n\r\n// part4\r\n//always @ (posedge clkb_n or negedge rst_n)\r\nalways @ (posedge clkb or negedge rst_n)\r\nbegin\r\n    if (!rst_n) begin\r\n        sel_clkb_dly1 <= 1'b0;\r\n        sel_clkb_dly2 <= 1'b0;\r\n        sel_clkb_dly3 <= 1'b0;\r\n    end\r\n    else begin\r\n        sel_clkb_dly1 <= sel_clkb_d1   ;\r\n        sel_clkb_dly2 <= sel_clkb_dly1 ;\r\n        sel_clkb_dly3 <= sel_clkb_dly2 ;\r\n    end\r\nend\r\n\r\n// part5\r\nclk_gate_xxx clk_gate_a ( .CP(clka), .EN(sel_clka_dly1), .Q(clka_g)  .TE(1'b0) );\r\nclk_gate_xxx clk_gate_b ( .CP(clkb), .EN(sel_clkb_dly1), .Q(clkb_g)  .TE(1'b0) );\r\n//assign clka_g = clka & sel_clka_dly1 ;\r\n//assign clkb_g = clkb & sel_clkb_dly1 ;\r\nassign clk_o = clka_g | clkb_g ;\r\n\r\nendmodule\r\n\r\n\r\n`timescale 1ns/1ps\r\n/*\r\n\u523a\u65f6\u949f\u5207\u6362\u8981\u70b9\uff1a\r\n1. \u590d\u4f4d\u540e\u540c\u6b65\u4fe1\u53f7\u4e3a0\uff1b\r\n2. \u65f6\u949f\u5207\u6362\u53d1\u751f\u5728\u4f4e\u7535\u5e73\u65f6\r\n*/\r\nmodule clock_gate(\r\n    input   clk1,\r\n    input   clk2,\r\n    input   rst_n,\r\n    input   select,\r\n    output  clk\r\n);\r\n\r\nreg clk1_syn1, clk1_syn2;\r\nreg clk2_syn1, clk2_syn2;\r\n//\u540c\u6b65\u56681\r\nalways @(posedge clk1 or negedge rst_n) begin\r\n    if (!rst_n) begin\r\n        clk1_syn1 <= 1'b0;\r\n    end\r\n    else begin\r\n        clk1_syn1 <= select & (~clk2_syn2);  //\u4fdd\u8bc1\u540c\u6b65\u56682\u8f93\u51fa\u4e0d\u5de5\u4f5c\u65f6\u540c\u6b65\u56681\u624d\u8f93\u51fa\uff0c\u8fd9\u6bb5\u65f6\u95f4\u5185\u8f93\u51fa\u65f6\u949f\u4fdd\u6301\u4f4e\u7535\u5e73\r\n    end\r\nend\r\nalways @(negedge clk1 or negedge rst_n) begin   //\u7b2c\u4e8c\u7ea7\u4e0b\u964d\u6cbf\u89e6\u53d1\uff0c\u4fdd\u8bc1\u5728\u4f4e\u7535\u5e73\u5207\u6362\u65f6\u949f\r\n    if (!rst_n) begin\r\n        clk1_syn2 <= 1'b0;\r\n    end\r\n    else begin\r\n        clk1_syn2 <= clk1_syn1;  //\u540c\u6b65\u540e\u7684\u95e8\u63a7\u4fe1\u53f7\r\n    end\r\nend\r\n//\u540c\u6b65\u56682\r\nalways @(posedge clk2 or negedge rst_n) begin\r\n    if (!rst_n) begin\r\n        clk2_syn1 <= 1'b0;\r\n    end\r\n    else begin\r\n        clk2_syn1 <= (~select) & (~clk1_syn2);  //\u4fdd\u8bc1\u540c\u6b65\u56681\u8f93\u51fa\u4e0d\u5de5\u4f5c\u65f6\u540c\u6b65\u56682\u624d\u8f93\u51fa\uff0c\u8fd9\u6bb5\u65f6\u95f4\u5185\u8f93\u51fa\u65f6\u949f\u4fdd\u6301\u4f4e\u7535\u5e73\r\n    end\r\nend\r\nalways @(negedge clk2 or negedge rst_n) begin\r\n    if (!rst_n) begin\r\n        clk2_syn2 <= 1'b0;\r\n    end\r\n    else begin\r\n        clk2_syn2 <= clk2_syn1;  //\u540c\u6b65\u540e\u7684\u95e8\u63a7\u4fe1\u53f7\r\n    end\r\nend\r\nassign clk = (clk2_syn2 & clk2) | (clk1_syn2 & clk1);  //\u5c06\u540c\u6b65\u540e\u7684\u95e8\u63a7\u4fe1\u53f7\u4e0e\u8be5\u4fe1\u53f7\u63a7\u5236\u7684\u65f6\u949f\u76f8\u4e0e\u8f93\u51fa\r\nendmodule\r\n\r\n\r\nmodule abs(\r\n    input               clk,\r\n    input               rst,\r\n    input       [7 : 0] iData,\r\n    output  reg [7 : 0] oData\r\n);\r\nalways @(posedge clk) begin\r\n    if (rst) begin\r\n        oData <= 8'd0;\r\n    end\r\n    else if (iData[7]) begin\r\n        oData <= 1 + (~iData);\r\n    end\r\n    else begin\r\n        oData <= iData;\r\n    end\r\nend\r\nendmodule\r\n\n"})})}function _(n={}){const{wrapper:r}={...(0,l.R)(),...n.components};return r?(0,s.jsx)(r,{...n,children:(0,s.jsx)(g,{...n})}):g(n)}},28453:(n,r,e)=>{e.d(r,{R:()=>c,x:()=>i});var s=e(96540);const l={},t=s.createContext(l);function c(n){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function i(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),s.createElement(t.Provider,{value:r},n.children)}}}]);