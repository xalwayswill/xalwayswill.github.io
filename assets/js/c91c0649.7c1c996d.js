"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2016],{43215:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>_,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var s=r(74848),t=r(28453);const a={},i=void 0,o={id:"\u968f\u7b14/rand_case-sv",title:"rand_case-sv",description:"",source:"@site/docs/\u968f\u7b14/rand_case-sv.md",sourceDirName:"\u968f\u7b14",slug:"/\u968f\u7b14/rand_case-sv",permalink:"/docs/\u968f\u7b14/rand_case-sv",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u968f\u7b14/rand_case-sv.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"img_transaction-sv",permalink:"/docs/\u968f\u7b14/img_transaction-sv"},next:{title:"tb-sv",permalink:"/docs/\u968f\u7b14/tb-sv"}},_={},c=[];function d(n){const e={code:"code",pre:"pre",...(0,t.R)(),...n.components};return(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'`ifndef RAND_CASE__SV\r\n`define RAND_CASE__SV\r\n\r\nclass rand_sequence extends uvm_sequence#(img_transaction);\r\n\r\n    img_config img_conf;\r\n\r\n    function new (string name = "rand_sequence");\r\n        super.new(name);\r\n    endfunction : new\r\n\r\n    virtual task body();\r\n        if(starting_phase != null)\r\n            starting_phase.raise_objection(this);  // uvm 1.1\r\n        // uvm_phase p = get_starting_phase();  // uvm 1.2\r\n        // if(p) p.raise_objection(this);\r\n        req = img_transaction::type_id::create("req");\r\n        repeat(img_conf.img_high) begin\r\n            start_item(req);\r\n            req.img_wide = img_conf.img_wide;\r\n            if(!req.randomize() with {req.img_data.size == img_conf.img_wide;})\r\n                `uvm_error(get_type_name(), "randomization is failed for req");\r\n            finish_item(req);\r\n        end\r\n        if(starting_phase != null)\r\n            starting_phase.drop_objection(this);  // uvm 1.1\r\n        // if(p) p.drop_objection(this);  // uvm 1.2\r\n    endtask : body\r\n\r\n    `uvm_object_utils(rand_sequence)\r\nendclass : rand_sequence\r\n\r\nclass rand_case extends base_test;\r\n    rand_sequence rand_seq;\r\n    img_config img_conf;\r\n\r\n    function new(string name = "rand_case", uvm_component parent = null);\r\n        super.new(name, parent);\r\n    endfunction : new\r\n\r\n    extern virtual function void build_phase(uvm_phase phase);\r\n\r\n    function void report_phase(uvm_phase phase);\r\n        super.report_phase(phase);\r\n    endfunction : report_phase\r\n    extern virtual task main_phase(uvm_phase phase);\r\n    `uvm_component_utils(rand_case)\r\nendclass : rand_case\r\n\r\nfunction void rand_case::build_phase(uvm_phase phase);\r\n    super.build_phase(phase);\r\n\r\n    if(!uvm_config_db#(img_config)::get(this, "", "img_conf", img_conf))\r\n        `uvm_fatal("rand_case", "Image config must be set!!!");\r\n    // uvm_config_db#(uvm_object_wrapper)::set(this,\r\n    //                                         "env.i_agt.sqr.main_phase",\r\n    //                                         "default_sequence",\r\n    //                                         rand_case::type_id::get());\r\nendfunction : build_phase\r\n\r\ntask rand_case::main_phase(uvm_phase phase);\r\n    super.main_phase(phase);\r\n    rand_seq = rand_sequence::type_id::create("rand_seq");\r\n    rand_seq.img_conf = img_conf;\r\n    // phase.raise_objection(this);\r\n    rand_seq.starting_phase = phase;  // uvm 1.1\r\n    // rand_seq.set_starting_phase(phase);  // uvm 1.2\r\n    rand_seq.start(env.img_agt_i.sqr);\r\n    // phase.drop_objection(this);\r\nendtask : main_phase\r\n\r\n`endif\n'})})}function u(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},28453:(n,e,r)=>{r.d(e,{R:()=>i,x:()=>o});var s=r(96540);const t={},a=s.createContext(t);function i(n){const e=s.useContext(a);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);