"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7542],{4289:(n,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>p,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var e=r(74848),i=r(28453);const a={},p=void 0,s={id:"script/python\u53caSV\u8bfb\u53d6bin\u6587\u4ef6",title:"python\u53caSV\u8bfb\u53d6bin\u6587\u4ef6",description:"",source:"@site/docs/script/python\u53caSV\u8bfb\u53d6bin\u6587\u4ef6.md",sourceDirName:"script",slug:"/script/python\u53caSV\u8bfb\u53d6bin\u6587\u4ef6",permalink:"/docs/script/python\u53caSV\u8bfb\u53d6bin\u6587\u4ef6",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/script/python\u53caSV\u8bfb\u53d6bin\u6587\u4ef6.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"python-argparse-----\u547d\u4ee4\u884c\u9009\u9879\u3001\u53c2\u6570\u548c\u5b50\u547d\u4ee4\u89e3\u6790\u5668",permalink:"/docs/script/python-argparse-----\u547d\u4ee4\u884c\u9009\u9879\u3001\u53c2\u6570\u548c\u5b50\u547d\u4ee4\u89e3\u6790\u5668"},next:{title:"python\u5904\u7406\u4e8c\u8fdb\u5236\u6587\u4ef6",permalink:"/docs/script/python\u5904\u7406\u4e8c\u8fdb\u5236\u6587\u4ef6"}},o={},d=[];function c(n){const t={code:"code",pre:"pre",...(0,i.R)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{children:'`timescale 1 ns / 1 ps\r\nmodule file_read();\r\n\r\nstring file_path;\r\nint fp;\r\nlogic [7:0] pix_data_l;  // bin\u6587\u4ef6\u4e2d2byte\u4e3a\u4e00\u4e2a\u6570\u636e\uff0c\u4f4e\u5b57\u8282\u5728\u524d\uff0c\u9ad8\u5b57\u8282\u5728\u540e\r\nlogic [7:0] pix_data_h;\r\nlogic [15:0] pix_data;\r\nlogic [15:0] mem [5120];\r\ninitial begin\r\n    $display("HELLO");\r\n    file_path = "../src/Bright_data.bin";\r\n    fp = $fopen(file_path, "rb");\r\n    repeat(10) begin\r\n        $fread(pix_data_l, fp);\r\n        $fread(pix_data_h, fp);\r\n        pix_data = {pix_data_h, pix_data_l};\r\n        $display(pix_data);\r\n    end\r\n    $fclose(fp);\r\n    $stop();\r\nend\r\n\r\nendmodule\n'})}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{children:'# -*- coding: utf-8 -*-\r\n#python\r\nimport numpy as np\r\nimport cv2\r\nimport struct\r\nimport os\r\nimport matplotlib.pyplot as plt\r\n\r\nIMG_WIDE = 5120\r\nIMG_HIGH = 100\r\n\r\ndef img_read(file_path):\r\n    img_data = np.zeros((IMG_HIGH, IMG_WIDE), dtype = np.uint16)\r\n    img_line = []\r\n    size = os.path.getsize(file_path)\r\n    with open(file_path, "rb") as fp:\r\n        for i in range(size//2):\r\n            data_tmp = fp.read(2)  # read 2 bytes\r\n            pix_data = struct.unpack(\'h\', data_tmp)  # bin \u6587\u4ef6\u4e2d\u4e24\u4e2abyte\u4e3a\u4e00\u4e2a\u6570\uff0c\u9ad8\u4f4ebyte\u98a0\u5012\uff0cunpack\u4e4b\u540e\u76f4\u63a5\u8f6c\u6362\u4e3a\u5341\u8fdb\u5236\u6570\uff0c\u4e14byte\u987a\u5e8f\u4e3a\u6b63\u786e\u7684\r\n            # print(img_data_hex)\r\n            img_line.append(pix_data)\r\n\r\n    img_line = np.array(img_line, dtype=np.uint16).reshape(1, IMG_WIDE)\r\n    img_data = img_data + img_line # broadcast\r\n    # cv2.imshow("data before mprnuc", img_data)\r\n    # cv2.waitKey(0)\r\n    cv2.imwrite(file_path.replace(r".bin", r".jpg"), img_data)\r\n    return img_line\r\n\r\nif __name__ == "__main__":\r\n    file_path = r"src/Bright_data.bin"\r\n    img_data = img_read(file_path)\r\n    file_path = r"src/Bright_data_out.bin"\r\n    img_data_mprnuc = img_read(file_path)\r\n\r\n    ind = range(IMG_WIDE)\r\n    linelist = plt.plot(ind, img_data[0], ind, img_data_mprnuc[0])\r\n    plt.setp(linelist)\r\n    # plt.plot(ind, img_line[0])\r\n    axes = plt.gca()\r\n    axes.set_xlim([0,IMG_WIDE])\r\n    axes.set_ylim([2**10,2**12])\r\n    plt.show()\n'})})]})}function l(n={}){const{wrapper:t}={...(0,i.R)(),...n.components};return t?(0,e.jsx)(t,{...n,children:(0,e.jsx)(c,{...n})}):c(n)}},28453:(n,t,r)=>{r.d(t,{R:()=>p,x:()=>s});var e=r(96540);const i={},a=e.createContext(i);function p(n){const t=e.useContext(a);return e.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function s(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:p(n.components),e.createElement(a.Provider,{value:t},n.children)}}}]);