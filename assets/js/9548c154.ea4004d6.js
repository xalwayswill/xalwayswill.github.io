"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1394],{55690:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>h});var r=t(74848),i=t(28453);const o={},s=void 0,a={id:"\u56fe\u50cf\u5904\u7406/\u53bb\u7d2b\u8fb9",title:"\u53bb\u7d2b\u8fb9",description:"code",source:"@site/docs/\u56fe\u50cf\u5904\u7406/\u53bb\u7d2b\u8fb9.md",sourceDirName:"\u56fe\u50cf\u5904\u7406",slug:"/\u56fe\u50cf\u5904\u7406/\u53bb\u7d2b\u8fb9",permalink:"/docs/\u56fe\u50cf\u5904\u7406/\u53bb\u7d2b\u8fb9",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u56fe\u50cf\u5904\u7406/\u53bb\u7d2b\u8fb9.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u4e71\u4e03\u516b\u7cdf",permalink:"/docs/\u56fe\u50cf\u5904\u7406/\u4e71\u4e03\u516b\u7cdf"},next:{title:"RGB",permalink:"/docs/\u56fe\u50cf\u5904\u7406/\u56fe\u50cf\u8272\u57df\u7a7a\u95f4"}},l={},h=[{value:"\u4e2a\u4eba\u7406\u89e3",id:"\u4e2a\u4eba\u7406\u89e3",level:2},{value:"1. \u8f74\u5411\u8272\u5dee",id:"1-\u8f74\u5411\u8272\u5dee",level:4},{value:"\u7d2b\u8fb9",id:"\u7d2b\u8fb9",level:2},{value:"\u9ad8\u4eae\u533a\u57df\u68c0\u6d4b",id:"\u9ad8\u4eae\u533a\u57df\u68c0\u6d4b",level:2},{value:"\u8fb9\u7f18\u533a\u57df\u68c0\u6d4b",id:"\u8fb9\u7f18\u533a\u57df\u68c0\u6d4b",level:2},{value:"Example",id:"example",level:2},{value:"Algorithm outline",id:"algorithm-outline",level:2},{value:"Intuition and future prospects",id:"intuition-and-future-prospects",level:2}];function d(e){const n={a:"a",em:"em",h1:"h1",h2:"h2",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mjambon/purple-fringe",children:"code"}),"\r\n",(0,r.jsx)(n.a,{href:"https://blog.csdn.net/Aoman_Hao/article/details/105753372",children:"\u8f6c\u8f7d"}),"\r\n",(0,r.jsx)(n.a,{href:"https://blog.csdn.net/Aoman_Hao/article/details/113797420",children:"\u8f6c\u8f7d"}),"\r\n",(0,r.jsx)(n.a,{href:"https://www.qinxing.xyz/posts/e72969e7/",children:"ISP\u76f8\u5173\u4e2a\u4eba\u4e3b\u9875"})]}),"\n",(0,r.jsx)(n.h2,{id:"\u4e2a\u4eba\u7406\u89e3",children:"\u4e2a\u4eba\u7406\u89e3"}),"\n",(0,r.jsxs)(n.p,{children:["###\u6210\u56e0\r\n\u611f\u89c9\u4e3b\u8981\u4e24\u65b9\u9762\uff0c\u4e00\u662f\u955c\u5934\u8272\u5dee\uff08\u4e3b\u8981\uff09\uff0c\u4e8c\u662fdemosaic\u9020\u6210\u7684\u56fe\u50cf\u8fb9\u7f18\u7684false color\r\n\u955c\u5934\u5c3d\u91cf\u6ee1\u8db3\u53ef\u89c1\u5149\u90e8\u5206\u591a\u6570\u533a\u57df\u5bf9\u7126\u9700\u6c42\uff0c\u800c\u5bf9\u4e8e\u77ed\u6ce2\u957f\uff08\u7d2b\u5149\uff0c\u7d2b\u5916\u7ebf\uff09\u4ea7\u751f\u76f8\u53cd\u5f71\u54cd\uff0c\u6700\u7ec8\u5bfc\u81f4\u56fe\u50cf\u51fa\u73b0\u7d2b\u8fb9\u6a21\u7cca\u3002\r\n",(0,r.jsx)(n.strong,{children:"\u9ad8\u4eae\uff0c\u9ad8\u5bf9\u6bd4\u5ea6\uff08\u8fb9\u7f18\uff09\uff0c\u8fdc\u79bb\u4e2d\u5fc3\uff08\u6a2a\u5411\u8272\u5dee\u8d8a\u660e\u663e\uff09"})]}),"\n",(0,r.jsx)(n.h4,{id:"1-\u8f74\u5411\u8272\u5dee",children:"1. \u8f74\u5411\u8272\u5dee"}),"\n",(0,r.jsxs)(n.p,{children:["\u7531\u4e8e\u4f20\u611f\u5668\u5bf9\u7eff\u8272\u654f\u611f\uff0c\u901a\u5e38\u4ee5\u7eff\u8272\u5e73\u9762\u4f5c\u4e3a\u57fa\u51c6\u3002\u805a\u7126\u540e\uff0c\u7eff\u8272\u5149\u675f\u7ecf\u8fc7\u900f\u955c\uff0c\u5f62\u6210\u4e86\u4e00\u4e2a\u7eff\u8272\u7684\u70b9\uff0c\u800c\u7ea2\u8272\u548c\u84dd\u8272\u5728sensor\u4e0a\u5f62\u6210\u4e86\u4e00\u4e2a\u5f25\u6563\u5706\u3002\u53f3\u4fa7\u662f\u8f74\u5411\u8272\u5dee\u7684\u6548\u679c\u56fe\uff0c\u7406\u60f3\u4e2d\u5e94\u8be5\u662f\u9ed1\u8272\u7684\u56fe\u4e0a\u4e00\u4e2a\u4e2a\u767d\u70b9\uff0c\u5b9e\u9645\u6548\u679c\u662f\u767d\u70b9\u5468\u56f4\u5305\u88f9\u7740\u4e00\u5c42\u7d2b\u8fb9\r\n",(0,r.jsx)(n.img,{src:t(93580).A+"",width:"954",height:"617"})]}),"\n",(0,r.jsx)(n.p,{children:"\u7279\u70b9\r\n\u8272\u5dee\u989c\u8272\u968f\u7740\u7126\u70b9\u7684\u79fb\u52a8\u800c\u53d8\u5316\u7684\u65f6\u5019\uff08\u624b\u52a8\u8c03\u6574\u805a\u7126\u4f4d\u7f6e\uff09\uff0c\u6211\u4eec\u8ba4\u4e3a\u51fa\u73b0\u4e86\u7eb5\u5411\u8272\u5dee\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u7126\u70b9\u5728\u524d\u9762\u4f1a\u504f\u7d2b\uff0c\u7126\u70b9\u5728\u540e\u9762\u4f1a\u504f\u7eff\uff0c\u5c31\u662f\u7eb5\u5411\u8272\u5dee\r\n\u7f29\u5c0f\u5149\u5708\u53ef\u4ee5\u6291\u5236\u7eb5\u5411\u8272\u5dee\uff08\u56e0\u4e3a\u7f29\u5c0f\u5149\u5708\u53ef\u4ee5\u7f29\u5c0f\u5f25\u6563\u5706\uff09\r\n\u5982\u679c\u5728\u753b\u9762\u4e2d\u592e\u51fa\u73b0\uff0c\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u662f\u7eb5\u5411\u8272\u5dee\uff0c\u56e0\u4e3a\u6a2a\u5411\u4e00\u822c\u8fb9\u7f18\u66f4\u52a0\u4e25\u91cd\uff0c\u7eb5\u5411\u8272\u5dee\u7684\u5206\u5e03\u5747\u5300\u7684\u5206\u5e03\u5728\u6574\u5f20\u56fe\u50cf\u5185\r\n####2. \u6a2a\u5411\u8272\u5dee"}),"\n",(0,r.jsxs)(n.p,{children:["\u5927\u90e8\u5206\u573a\u666f\u90fd\u662f\u6a2a\u5411\u8272\u5dee\u3002\u4e0d\u540c\u6ce2\u957f\u7684\u5149\u7ecf\u8fc7\u900f\u955c\u6298\u5c04\u540e\uff0c\u843d\u5728sensor\u6a2a\u5411\u4e0a\u7684\u4e0d\u540c\u4f4d\u7f6e\u4e0a\u3002\u4ece\u53f3\u4fa7\u7684\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u4e2d\u5fc3\u7684\u8272\u5dee\u5f88\u5c0f\uff0c\u8fb9\u7f18\u7684\u8272\u5dee\u5f88\u5927\uff0c\u7531\u5185\u800c\u5916\uff0c\u8272\u5dee\u7684\u989c\u8272\u4f9d\u6b21\u4ee5\u7ea2\u9ec4\u84dd\u7684\u987a\u5e8f\u53d8\u5316\u3002\r\n",(0,r.jsx)(n.img,{src:t(10299).A+"",width:"1045",height:"623"})]}),"\n",(0,r.jsx)(n.p,{children:"\u7279\u70b9\r\n\u62cd\u6444\u4e00\u4e2a\u7269\u4f53\u7684\u65f6\u5019\uff0c\u5728\u7269\u4f53\u7684\u4e00\u4fa7\u51fa\u73b0\u7d2b\u8fb9\uff0c\u5728\u53e6\u5916\u4e00\u4fa7\u51fa\u73b0\u53e6\u5916\u4e00\u79cd\u989c\u8272\uff0c\u5982\u7eff\u8fb9\r\n\u4ece\u56fe\u50cf\u4e2d\u5fc3\u5230\u8fb9\u7f18\uff0c\u6a2a\u5411\u8272\u5dee\u4f1a\u53d8\u5f97\u8d8a\u6765\u8d8a\u4e25\u91cd\r\n\u8c03\u8282\u5149\u5708\u65e0\u6cd5\u51cf\u5f31\u7d2b\u8fb9\r\n\u6240\u4ee5\u9700\u8981radial weight"}),"\n",(0,r.jsx)(n.p,{children:"###\u73b0\u8c61\r\n\u9ad8\u53cd\u5dee\uff0c \u5927\u80cc\u5149\u56fe\u50cf\u65f6\u5019\u5bb9\u6613\u51fa\u73b0\uff0c\u793a\u4f8b\u56fe\u7247\u5982\u4e0b\u9762\u7684dog\r\n##\u5904\u7406\u65b9\u6cd5\r\n\u4ea7\u751f\u84dd\u8272\u8499\u7248\u51cf\u53bb\u90e8\u5206\u84dd\u8272\u5206\u91cf\uff1f"}),"\n",(0,r.jsx)(n.p,{children:"\u56fe\u50cf\u7d2b\u8fb9\u5b58\u5728\u6570\u7801\u76f8\u673a\u3001\u76d1\u63a7\u6444\u50cf\u5934\u7b49\u6570\u5b57\u6210\u50cf\u56fe\u50cf\uff0c\u4f7f\u7528\u8bbe\u5907\u5728\u9006\u5149\u3001\u5927\u5149\u5708\u6761\u4ef6\u4e0b\u62cd\u6444\u56fe\u50cf\u7684\u9ad8\u53cd\u5dee\u533a\u57df\u5bb9\u6613\u51fa\u73b0\u7d2b\u8fb9\uff0c\u89e3\u51b3\u56fe\u50cf\u81ea\u7f16\u95ee\u9898\u6709\u52a9\u8bbe\u5907\u5f97\u5230\u5b8c\u7f8e\u56fe\u50cf\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7d2b\u8fb9\u6210\u56e0\u5206\u6790\u548c\u786e\u5b9a\u6709\u52a9\u4e0e\u7d2b\u8fb9\u6d88\u9664\u7684\u56fe\u50cf\u5904\u7406\u7b97\u6cd5\u7814\u7a76\u548c\u6444\u50cf\u8bbe\u5907\u5de5\u7a0b\u6539\u8fdb\uff0c\u80fd\u591f\u6539\u5584\u81ea\u7f16\u7684\u786c\u4ef6\u6210\u672c\u66f4\u9ad8\uff0c\u975e\u5e38\u9700\u8981\u7814\u7a76\u53bb\u9664\u7d2b\u8fb9\u7684\u56fe\u50cf\u5904\u7406\u7b97\u6cd5\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u7d2b\u8fb9",children:"\u7d2b\u8fb9"}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7\u53d6\u8272\u5668\u4e2d\u5bf9\u201c\u7d2b\u8fb9\u201d\u7684\u8272\u5f69\u5206\u6790\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u5927\u90e8\u5206\u7d2b\u8fb9\u7684\u4e3b\u8981\u6784\u6210\u5c31\u662f\u6d0b\u7ea2\uff0c\u8fd9\u4e9b\u7d2b\u8fb9\u662f\u7531\u4e8e\u9ad8\u53cd\u5dee\u5927\u80cc\u5149\u9759\u7269\u8fb9\u7f18\uff0c\u4ea7\u751f\u5149\u5b66\u884d\u5c04\uff0c\u52a0\u4e0aDC/DV\u7684CCD\u5728\u8272\u5f69\u63d2\u503c\u5bfc\u81f4\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u56e0\u4e3a\u4eba\u5bf9\u7ea2\u3001\u7eff\u3001\u84dd\u4e09\u79cd\u989c\u8272\u7684\u4e2d\u7eff\u5206\u91cf\u6bd4\u8f83\u654f\u611f\uff0c\u5927\u591asensor\u7684bayer\u6392\u5217\u5927\u591a\u91c7\u6837\u7eff\u5206\u91cf\u6bd4\u8f83\u591a\uff0c\u4f8b\u5982RGGB\u6392\u5217\u3002\r\n\u7eff\u8272\u91c7\u6837\u7ed3\u679c\u6bd4\u8f83\u591a,\u76f8\u6bd4\u7ea2\u8272\u548c\u84dd\u8272\u901a\u9053\u6765\u8bf4\u4e0d\u5bb9\u6613\u53d1\u751f\u6df7\u53e0\uff0c\u800c\u7ea2\u84dd\u5206\u91cf\u7ec4\u5408\u540e\u8868\u73b0\u4e3a\u6d0b\u7ea2\u8272\uff0c\u4e0e\u53d6\u8272\u5668\u7684\u8868\u73b0\u63a5\u8fd1\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u786c\u4ef6\u6539\u5584\u7d2b\u8fb9\uff08\u955c\u5934\u3001sensor\uff09\r\n\u5c3d\u91cf\u9009\u62e9\u4f4e\u8272\u5dee\u7684\u955c\u5934\uff0c\u9a8c\u8bc1\u8272\u5dee\u66f2\u7ebf\u3002sensor\u9009\u62e9\u50cf\u5143\u9762\u79ef\u8f83\u5927\uff0c\u4fdd\u8bc1\u5149\u5165\u5c04\u89d2\u5ea6\u8f83\u5927\uff0c\u4ea6\u53ef\u4ee5\u89c4\u907fshading\u95ee\u9898\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7b97\u6cd5\u6539\u5584\r\n\u5728RGB\u57df\u68c0\u6d4b\u7d2b\u8fb9"}),"\n",(0,r.jsx)(n.h2,{id:"\u9ad8\u4eae\u533a\u57df\u68c0\u6d4b",children:"\u9ad8\u4eae\u533a\u57df\u68c0\u6d4b"}),"\n",(0,r.jsxs)(n.p,{children:["\u9996\u5148\u5bf9R\u3001G\u3001B\u5206\u522b\u8bbe\u7f6e\u56fa\u5b9a\u7684\u4eae\u5ea6\u9608\u503c\uff0c\u628a\u56fe\u50cf\u5206\u4e3a\u5f88\u591a\u5757\uff0c\u7cbe\u786e\u4e00\u70b9\u53ef\u4ee5\u9009\u62e95",(0,r.jsx)(n.em,{children:"5\u5927\u5c0f\u7684\u90bb\u57df\uff0c\u7c97\u7cd9\u4e00\u70b9\u53ef\u4ee5\u900913"}),"13\uff0c\u5224\u65ad\u90bb\u57df\u5185\u6bcf\u4e00\u4e2a\u50cf\u7d20\u70b9\u7684R\u3001G\u3001B\u503c\u662f\u5426\u8d85\u8fc7R\u3001G\u3001B\u521d\u8bbe\u4eae\u5ea6\u9608\u503c\uff08\u53ef\u80fd\u4e0d\u540c\uff09\uff0c\u90bb\u57df\u5185\u8d85\u8fc7R\u3001G\u3001B\u521d\u8bbe\u4eae\u5ea6\u9608\u503c\u7684\u50cf\u7d20\u8bb0\u5f55\u6570\u76ee\u5206\u522b\u4e3aRNum\u3001GNum\u3001BNum\uff0c\uff0c\u5f53RNum\u3001GNum\u3001BNum\u540c\u65f6\u6ee1\u8db3\uff1e\u8bbe\u5b9a\u7684\u9ad8\u4eae\u533a\u57df\u50cf\u7d20\u6570\u9608\u503c\uff08R\u3001G\u3001B\u4e09\u901a\u9053\u53ef\u80fd\u4e0d\u540c\uff09\u65f6\uff0c\u5224\u5b9a\u8be5\u533a\u57df\u4e3a\u9ad8\u4eae\u533a\u57df\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u8fb9\u7f18\u533a\u57df\u68c0\u6d4b",children:"\u8fb9\u7f18\u533a\u57df\u68c0\u6d4b"}),"\n",(0,r.jsx)(n.p,{children:"\u65e2\u53ef\u4ee5\u4f7f\u7528\u5e38\u7528\u7684\u8fb9\u7f18\u68c0\u6d4b\u7b97\u5b50Roberts \u68af\u5ea6\u7b97\u5b50\u3001\u62c9\u666e\u62c9\u65af\u68af\u5ea6\u7b97\u5b50\u7b49\uff0c\u4e5f\u53ef\u4ee5\u5206\u6790\u50cf\u7d20\u533a\u57df\u65b9\u5dee\u8d8b\u52bf\u6765\u5224\u65ad\u662f\u5426\u5c5e\u4e8e\u8fb9\u7f18\u3002\u7edf\u8ba1\u533a\u57df\u5185\u50cf\u7d20\u65b9\u5dee\uff0c\u5224\u65ad\u65b9\u5dee\u503c\u4e0e\u521d\u8bbe\u65b9\u5dee\u9608\u503c\u7684\u5927\u5c0f\uff0c\u53ea\u6709\u5927\u4e8e\u8be5\u9608\u503c\u7684\u533a\u57df\u624d\u88ab\u8ba4\u4e3a\u662f\u8fb9\u7f18\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u6ee1\u8db3\u4ee5\u4e0a\u9ad8\u4eae\u548c\u8fb9\u7f18\u533a\u57df\u591a\u4e2a\u6761\u4ef6\u7684\u50cf\u7d20\u53ef\u4ee5\u8ba4\u4e3a\u662f\u7d2b\u8fb9\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u77eb\u6b63\u7d2b\u8fb9\r\n\u7d2b\u8fb9\u533a\u57df\u7d2b\u8272\u9971\u548c\u5ea6\u6de1\u5316\uff0c\u5177\u4f53\u63aa\u65bd\u4e0d\u6653\u5f97\uff0c\u518d\u770b\u770b\u6587\u732e\u597d\u4e86"}),"\n",(0,r.jsx)(n.h1,{id:"unpurple",children:"Unpurple"}),"\n",(0,r.jsx)(n.p,{children:"Unpurple is a tool for removing purple fringes (axial chromatic aberration) from digital photos using a heuristic of my own."}),"\n",(0,r.jsx)(n.p,{children:"This is the original OCaml implementation which produces a standalone executable with a simple command-line interface. It is fast enough (~ one second per megapixel) but doesn't preserve Exif data and the JPEG compression factor is fixed at 75%."}),"\n",(0,r.jsxs)(n.p,{children:["Unpurple was\xa0",(0,r.jsx)(n.a,{href:"https://github.com/dtschump/gmic-community/blob/master/include/stanislav_paskalev.gmic",children:"ported"}),"\xa0to\xa0",(0,r.jsx)(n.a,{href:"https://gmic.eu/",children:"G'MIC"}),"\xa0by\xa0",(0,r.jsx)(n.a,{href:"https://github.com/solarsea",children:"Stanislav Paskalev"}),", allowing its use from\xa0",(0,r.jsx)(n.a,{href:"https://www.gimp.org/",children:"GIMP"}),"\xa0and other image-manipulation software.\xa0"]}),"\n",(0,r.jsxs)(n.h2,{id:"example",children:[(0,r.jsx)(n.a,{href:"https://github.com/mjambon/purple-fringe#example"}),"Example"]}),"\n",(0,r.jsx)(n.p,{children:"Before:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/mjambon/purple-fringe/blob/master",children:(0,r.jsx)(n.img,{src:"https://upload-images.jianshu.io/upload_images/23495115-c0d04d2db432e0bb?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"Before"})})}),"\n",(0,r.jsx)(n.p,{children:"After:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/mjambon/purple-fringe/blob/master",children:(0,r.jsx)(n.img,{src:"https://upload-images.jianshu.io/upload_images/23495115-7fb33341d7f245e2?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"After"})})}),"\n",(0,r.jsx)(n.p,{children:"Difference:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/mjambon/purple-fringe/blob/master",children:(0,r.jsx)(n.img,{src:"https://upload-images.jianshu.io/upload_images/23495115-5d527f0d61e751bd?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"Difference"})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://mjambon.github.io/mjambon2016/purple-fringe/examples.html",children:"More examples"})}),"\n",(0,r.jsxs)(n.h2,{id:"algorithm-outline",children:[(0,r.jsx)(n.a,{href:"https://github.com/mjambon/purple-fringe#algorithm-outline"}),"Algorithm outline"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Produce a blurred mask from the blue component in the original image."}),"\n",(0,r.jsxs)(n.li,{children:["Subtract from the original image some amount of blue and red based on the intensities found in the blurred mask, using the following constraints:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Blue level may not drop below green level."}),"\n",(0,r.jsx)(n.li,{children:"Red level may not drop below green level."}),"\n",(0,r.jsxs)(n.li,{children:["Red",":blue"," ratio may not drop below some constant."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Please refer to the implementation for details and default parameters."}),"\n",(0,r.jsxs)(n.h2,{id:"intuition-and-future-prospects",children:[(0,r.jsx)(n.a,{href:"https://github.com/mjambon/purple-fringe#intuition-and-future-prospects"}),"Intuition and future prospects"]}),"\n",(0,r.jsx)(n.p,{children:"The original motivation for this work was to remove purple fringing from my own photos that I took with a relatively cheap lens. Coming up with an algorithm required:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Notions about optics, and in particular understanding why chromatic aberration happens."}),"\n",(0,r.jsx)(n.li,{children:"Notions about image manipulation and RGB color encoding."}),"\n",(0,r.jsx)(n.li,{children:"Notions about the visible spectrum (rainbow) and how wavelengths map to certain perceived colors."}),"\n",(0,r.jsx)(n.li,{children:"Notions about the perception of colors in humans and why computers encode colors as 3 components (excluding brightness or transparency) and not another number."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"It is useful, or perhaps critical, to understand why mixing blue and red dots produces a perception of purple, even though none of the light emitted from blue and red dots needs to have the wavelength of the purple band of the rainbow. School and Wikipedia are your friends."}),"\n",(0,r.jsx)(n.p,{children:"Here's my mental model of purple fringing, which may be inacurrate but turned out to be good enough. It may not work as well or at all for other types of chromatic aberration:"}),"\n",(0,r.jsx)(n.p,{children:'A camera "lens" is made of several simple lenses, which help not only with zooming in, but also correcting for certain problems. My understanding is that they allow multiple regions of the visible spectrum to remain in focus, but this has the opposite effect on the short wavelengths (purple and ultraviolet) which end up very blurred out. It is also possible that UV light is captured as purple by the sensor of a digital camera. As a result, black objects on a white background will exhibit a purple fringe all around. Note that this is different then some other types of chromatic aberration, where some objects have a red margin on one side and a blue margin on the other side.'}),"\n",(0,r.jsx)(n.p,{children:"Now for the method. The problem of removing the purple fringe is tackled by observing that the bright parts of the image still contain most of the purple that they should contain. We don't need to take the purple from the purple fringes and put it back into the bright areas. They're still plenty bright and their colors look natural. We assume that they still contain most of the indigo-purple color corresponding to the short wavelengths, in the correct location. So instead of trying to locate a purple fringe in the hope of removing it, we create a purple fringe from the image which already has a purple fringe. This involves selecting the blue-purple component of the image, which is a combination of blue and red within some acceptable ratio and blurring it. The result is a mask that if added to the original image would produce a purple fringe roughly like the one we want to remove. What remains to do is somehow subtract this approximate artificial purple fringe mask from the original. The first problem is that our artificial fringe is most likely wider and more intense that the actual fringe we want to remove, and we don't want to remove too much so as to not introduce new colors. The second problem is that we don't want to remove the blue-purple component from the bright areas of the image. These problems are solved by:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Subtracting the purple mask only where it's brighter than the original purple component."}),"\n",(0,r.jsx)(n.li,{children:"Subtracting purple only from regions that are somewhat purple, and at most until they look grey. For example, from a dark purplish pixel like (red = 0.3, green = 0.1, blue = 0.3), we may consider a purple fringe mask of (0.25, 0, 0.25). If we subtracted this mask directly, we would get (0.05, 0.1, 0.05) and now the pixel would be greenish! We avoid this by ensuring that at worst we turn a pixel grey. In this case, our resulting pixel would be (0.1, 0.1, 0.1), which is a dark grey rather than an undesirable dark green."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This is what the current transformations try to do, and it works often well, which is sometimes surprising. Some areas where a purple fringe was removed look greyer than they probably should, but the grey color has the advantage of being discreet."}),"\n",(0,r.jsx)(n.p,{children:"Some people have asked about removing green fringing. The current algorithm won't remove it. However, it's possible that a similar algorithm would work. I estimate it would take at least a couple of days to obtain a proof of concept, if it is feasible. I hope the explanations above may help whoever is interested in adding support for green-fringe removal."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},10299:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/23495115-082867c6a69e73b8-41c7c8a3308520e6f559c23f3271fe08.png"},93580:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/23495115-aa1350eb19300854-9b10e836145976084cc8d9e5be192149.png"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(96540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);