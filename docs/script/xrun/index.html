<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-script/xrun" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">xrun | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xalwayswill.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xalwayswill.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xalwayswill.github.io/docs/script/xrun"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="xrun | My Site"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xalwayswill.github.io/docs/script/xrun"><link data-rh="true" rel="alternate" href="https://xalwayswill.github.io/docs/script/xrun" hreflang="en"><link data-rh="true" rel="alternate" href="https://xalwayswill.github.io/docs/script/xrun" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce37c9a8.css">
<script src="/assets/js/runtime~main.58983a80.js" defer="defer"></script>
<script src="/assets/js/main.8555064f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tutorial---basics">Tutorial - Basics</a><button aria-label="Expand sidebar category &#x27;Tutorial - Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="Expand sidebar category &#x27;Tutorial - Extras&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/FPGA-IC/8B10B编码">FPGA-IC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/System-Verilog/Assertion">System-Verilog</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/save this to git code reponsitories/2021-01-27">save this to git code reponsitories</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/script/CSH">script</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/CSH">CSH</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/Python-参数解析模块-sys，getopt，argparse">Python-参数解析模块-sys，getopt，argparse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/Python-常用库记录">Python-常用库记录</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/Python-错误打印">Python-错误打印</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/Python常用函数">Python常用函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/TCL">TCL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/Verilog_module_instance">GUI_inst</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/alias问题">alias问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/filelist">filelist</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/makefile">makefile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/print_color">print_color</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/python-argparse-----命令行选项、参数和子命令解析器">python-argparse-----命令行选项、参数和子命令解析器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/python及SV读取bin文件">python及SV读取bin文件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/python处理二进制文件">python处理二进制文件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/sed-cat-awk-grep-wc-及应用">sed-cat-awk-grep-wc-及应用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/verdi-license">verdi-license</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/script/xrun">xrun</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/定义解释器">定义解释器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/正则表达式">正则表达式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/script/简单仿真编译及verdi环境">简单仿真编译及verdi环境</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/work-log---arm-china/2023-08-15">work-log---arm-china</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/work-log---g/2024-09-24">work-log---g</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/功能安全/低功耗相关">功能安全</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/图像处理/3DLUT">图像处理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/开发工具/Graphviz---绘制图形网络">开发工具</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/接口协议/CameraLink">接口协议</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/环境配置/Anaconda-配置多环境">环境配置</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/移知网课程/AMBA-APB-AHB-AXI">移知网课程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/随笔/ImageData-sv">随笔</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/面试题目记录/为什么使用与非门而不是或非门进行逻辑面积评估？">面试题目记录</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">script</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">xrun</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>xrun</h1></header><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import subprocess</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import argparse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import shutil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from string import Template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from filelist import expd_fl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def find_dir_path(root_path, target_dir):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    find the path of each design folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dir_path = &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hit = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list_dirs = os.walk(root_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for root, dirs, files in list_dirs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for dir in dirs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if dir.upper() == target_dir.upper():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                dir_path = os.path.join(root, dir)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                hit = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if hit == True:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if hit == False:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(&quot;GRUN-Error: Cann&#x27;t find the design folder, please check the design name!!!&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sys.exit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return dir_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def set_flow_dir_map():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set the dir mapping of each flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flow_dir_map = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;lint&quot;: &quot;spyglass&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cdc&quot;: &quot;spyglass&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sg&quot;: &quot;spyglass&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dft&quot;: &quot;spyglass&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dc&quot;: &quot;dc&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;fm&quot;: &quot;formal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;pt&quot;: &quot;primetime&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ptpx&quot;: &quot;primetime&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;vcs&quot;: &quot;vcs&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;xrun&quot;: &quot;xrun&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return flow_dir_map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def check_cfg(flow, design, flow_dir_map):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Check the exists of config files for each flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass  # TODO: Wait for later update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def copy_folder(src, dst):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Copy all files and folder under the src to dst folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;GRUN-Info: Copy {0} to {1}&quot;.format(src, dst))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if os.path.exists(src):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for file in os.listdir(src):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            src_file_path = os.path.join(src, file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dst_file_path = os.path.join(dst, file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if os.path.isdir(src_file_path):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if os.path.exists(dst_file_path):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    shutil.rmtree(dst_file_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                shutil.copytree(src_file_path, dst_file_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                print(&quot;Copytree &quot;+src_file_path+dst_file_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                shutil.copy(src_file_path, dst_file_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(&quot;GRUN-Error: Path {0} not exist.&quot;.format(src))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;GRUN-Info: Copy done.&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def set_flow_env(out_dir_path, design, top, design_path, flow, tag, flow_dir_map, flow_root_path):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Create the folder and setup the environment of each flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    the work folder is naming according to the top name not design</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check_cfg(flow, design, flow_dir_map)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(60*&#x27;=&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&#x27;GRUN-Info: Begin to copy the scripts of {0}&#x27;.format(flow))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    out_dir_path = os.path.join(out_dir_path, flow, top, tag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;GRUN-Info: Delete the folder {0}&quot;.format(out_dir_path))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if os.path.exists(out_dir_path):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shutil.rmtree(out_dir_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    os.makedirs(out_dir_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # copy the filelist to outdir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fl_dir_path = os.path.join(design_path, &#x27;filelist&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shutil.copytree(fl_dir_path, os.path.join(out_dir_path, &#x27;filelist&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # copy the common flow scripts to outdir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flow_dir_path = os.path.join(flow_root_path, flow_dir_map[flow])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    copy_folder(flow_dir_path, out_dir_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # copy the design setup and local config to outdir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    design_flow_path = os.path.join(design_path, &#x27;qc&#x27;, flow_dir_map[flow])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    copy_folder(design_flow_path, out_dir_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # for dc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if flow == &#x27;dc&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if os.path.exists(os.path.join(out_dir_path, &#x27;input&#x27;, &#x27;sdc&#x27;)):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            shutil.rmtree(os.path.join(out_dir_path, &#x27;input&#x27;, &#x27;sdc&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shutil.copytree(os.path.join(design_path, &#x27;qc&#x27;, &#x27;sdc&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        os.path.join(out_dir_path, &#x27;input&#x27;, &#x27;sdc&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shutil.copy(os.path.join(design_path, &#x27;filelist&#x27;, design.lower()+r&#x27;_syn.f&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    os.path.join(out_dir_path, &#x27;input&#x27;, design.lower()+r&#x27;_syn.f&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # expand the filelist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        expd_fl(os.path.join(out_dir_path, &#x27;input&#x27;, design.lower()+r&#x27;_syn.f&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                os.path.join(out_dir_path, &#x27;input&#x27;, &#x27;filelist&#x27;), &#x27;syn&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shutil.move(os.path.join(out_dir_path, &#x27;input&#x27;, &#x27;sdc&#x27;, design+r&#x27;.sdc&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    os.path.join(out_dir_path, &#x27;input&#x27;, &#x27;sdc&#x27;, design+r&#x27;.func.sdc&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Auto set the design top</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new_line = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new_file = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    with open(os.path.join(out_dir_path, r&#x27;run.sh&#x27;), &#x27;r&#x27;) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for line in f.readlines():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            print(line)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new_line = line.replace(&#x27;{TOP}&#x27;, top)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new_line = new_line.replace(&#x27;{DESIGN}&#x27;, design)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new_file += new_line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    with open(os.path.join(out_dir_path, r&#x27;run.sh&#x27;), &#x27;w&#x27;) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.write(new_file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&#x27;GRUN-Info: The scripts of {0} is copied done.&#x27;.format(flow))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&#x27;GRUN-Info: The flow work folder is {0}&#x27;.format(out_dir_path))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(60*&#x27;=&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def run_phase(design, top, tag, out_dir_path, design_path, flow_root_path, flow_dir_map, flow):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The main run phase of each flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    out_dir_path = os.path.join(out_dir_path, flow, top, tag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    os.chdir(out_dir_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cmd = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;lint&quot;: &quot;./run.sh lint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cdc&quot;: &quot;./run.sh cdc&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sg&quot;: &quot;./run.sh sg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dft&quot;: &quot;./run.sh&quot;,  # FIXME:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dc&quot;: &quot;./run.sh&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;fm&quot;: &quot;formal&quot;,  # FIXME:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;pt&quot;: &quot;primetime&quot;,  # FIXME:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ptpx&quot;: &quot;./run.sh&quot;,  # FIXME:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;vcs&quot;: &quot;./run.sh&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;xrun&quot;: &quot;./run.sh&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subprocess.run(cmd[flow], shell=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(60*&quot;=&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;The flow running result is in {0}&quot;.format(out_dir_path))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(60*&quot;=&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def init_design(design, flow_root_path):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    This function used to create the initial design folder.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cwd_path = os.getcwd()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    init_path = os.path.join(flow_root_path, &#x27;init&#x27;, &#x27;demo&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    design_path = os.path.join(cwd_path, design)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shutil.copytree(init_path, design_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # rename the init folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d = {&#x27;{DEMO_FILELIST}&#x27;: os.path.join(design_path, &#x27;filelist&#x27;, design+r&#x27;_syn.f&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &#x27;{DEMO_SGDC_FILE}&#x27;: os.path.join(design_path, &#x27;qc&#x27;, &#x27;spyglass&#x27;, &#x27;sgdc&#x27;, design+r&#x27;.sgdc&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &#x27;{DEMO_LINT_WAIVE_FILE}&#x27;: os.path.join(design_path, &#x27;qc&#x27;, &#x27;spyglass&#x27;, &#x27;waive&#x27;, design+&#x27;_lint.awl&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &#x27;{DEMO_CDC_WAIVE_FILE}&#x27;: os.path.join(design_path, &#x27;qc&#x27;, &#x27;spyglass&#x27;, &#x27;waive&#x27;, design+&#x27;_cdc.awl&#x27;)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for root, dirs, files in os.walk(os.path.join(cwd_path, design)):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for file in files:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new_line = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new_file = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            with open(os.path.join(root, file), &#x27;r&#x27;) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for line in f.readlines():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    new_line = line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    for key, value in d.items():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        new_line = new_line.replace(key, value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    new_file += new_line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            with open(os.path.join(root, file), &#x27;w&#x27;) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                f.write(new_file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if &#x27;demo&#x27; in file:  # TODO: not robust, if the word in filenema inculde demo but not full match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new_name = file.replace(&#x27;demo&#x27;, design)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                os.rename(os.path.join(root, file),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          os.path.join(root, new_name))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version = &#x27;r0p1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Author = &#x27;Yinghao.Xu&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser = argparse.ArgumentParser(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prog=&quot;grun&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description=&#x27;python script for running the eda flow, such as Spyglass, DesignCompiler and so on \n version: {0}, Author:{1}&#x27;.format(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            version, Author)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser.add_argument(&#x27;flows&#x27;, type=str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        nargs=&#x27;+&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        choices=[&#x27;lint&#x27;, &#x27;cdc&#x27;, &#x27;sg&#x27;, &#x27;dft&#x27;, &#x27;dc&#x27;, &#x27;fm&#x27;, &#x27;pt&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &#x27;ptpx&#x27;, &#x27;vcs&#x27;, &#x27;xrun&#x27;, &#x27;init&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        help=&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        This script support the following flows:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            lint: use Spyglass to run lint check.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            cdc:  use Spyglass to run cdc check.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            sg:   run Spyglass with GUI.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            dft:  use Spyglass to run dft check.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            dc:   use DesignCompiler to run synthesis.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            fm:   use Formality to run formal compare.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            pt:   run primetime for timing analysis.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            ptpx: use PrimeTime to run power analysis.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            vcs:  use vcs to compile the design.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            xrun: use xcelium to compile the design.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            init: create the initial design floder in current path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;&quot;&quot;)  # TODO: support run multi flow once time???</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser.add_argument(&#x27;top&#x27;, type=str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        help=&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        The top name of the design, if you want to run the flow for submodules under the design, \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        use dot as separator to connect the top and submodule, such as design.top&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;&quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser.add_argument(&#x27;-tag&#x27;, type=str, default=&quot;normal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        help=&quot;The tag of this run, if you don&#x27;t want to overwrite the last run folder, set this to different string&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser.add_argument(&#x27;-nr&#x27;, &#x27;--norun&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        help=&quot;Assert this parameter to just set up the flow environment, but not run the flow.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        action=&#x27;store_true&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser.add_argument(&#x27;-outdir&#x27;, type=str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        default=os.path.join(os.getenv(&quot;PROJ_HOME&quot;, default=&quot;&quot;), &quot;work&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args = parser.parse_args()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    top_split = args.top.split(&quot;.&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if len(top_split) == 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        top = top_split[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        design = top.lower()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    elif len(top_split) == 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        design = top_split[0].lower()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        top = top_split[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;GRUN-Error: Invalid input parameter of top, must be top_name or top_name.submodule!!!&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sys.exit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    de_path = os.getenv(&quot;DEPATH&quot;, default=&quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if de_path == &quot;&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(&quot;GRUN-Error: Can not find the environment of DEPATH, please source the prj.env!!!&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sys.exit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flow_dir_map = set_flow_dir_map()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flow_root_path = os.path.join(de_path, &quot;flows&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;GRUN-Info: The DEPATH is {0}&quot;.format(de_path))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;GRUN-Info: The flow path is {0}&quot;.format(flow_root_path))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for flow in args.flows:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if flow == &#x27;init&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            init_design(design, flow_root_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sys.exit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    design_path = find_dir_path(os.path.join(de_path, &quot;src&quot;), design)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;GRUN-Info: The design path is {0}&quot;.format(design_path))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for flow in args.flows:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if flow not in flow_dir_map:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            print(&quot;GRUN-Error: Invalid flow to run, please check the input parameter!!!&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sys.exit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        out_dir_path = os.path.join(os.path.expandvars(args.outdir))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        set_flow_env(out_dir_path, design, top, design_path,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     flow, args.tag, flow_dir_map, flow_root_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if args.norun:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            run_phase(design, top, args.tag, out_dir_path, design_path,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      flow_root_path, flow_dir_map, flow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/script/xrun.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/script/verdi-license"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">verdi-license</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/script/定义解释器"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">定义解释器</div></a></nav></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>